<?php

/**
 * @file
 * Module file for my Loopedia Module
 */



/**
 * Implements hook_node_info().
 *
 * We use hook_node_info() to define the loopedia node content type.
 */
function loopedia_node_info()
{
  return array(
    'integral' => array(
      'name' => t('Integral Node Type'),
      'base' => 'loopedia_integral',
      'description' => t('This is the node type for Feynman Integrals'),
      'has_title' => '1',
      'title_label' => t('Title Label, yo!'),
      'locked' => TRUE,
      'help' => t('This is an explanation that should help you.')
    ),
  );
}


/**
 * Implements hook_node_type_insert().
 *
 */
function loopedia_node_type_insert($content_type)
{
  if ($content_type->type == 'integral')
  {
    // Create fields for the integral content Type
    foreach (_loopedia_integral_installed_fields() as $field)
    {
      field_create_field($field);
    }

    // Create instances for fields
  }
}


/**
 * Define fields for the loopedia integral cnotent type.
 *
 * This is done here to make loopedia_node_type_insert() shorter.
 *
 * @return array
 *   An associative array specifying the fields we wish to add to our
 *   loopedia node type.
 */
function _loopedia_integral_installed_fields()
{
  return array(
    'loopedia_color' => array(
      'field_name'  => 'loopedia_color',
      'cardinality' => 2,
      'type'        => 'text',
      'settings'    => array('max_length' => 60),
    ),
    'loopedia_quantity' => array(
      'field_name'  => 'loopedia_quantity',
      'cardinality' => 1,
      'type'        => 'text',
    ),
  );
}


/**
 * Define the field instances for our content type.
 *
 * The instance lets Drupal know which widget to use to allow the user to enter
 * data and how to react in different view modes.  We are going to display a
 * page that uses a custom "node_example_list" view mode.  We will set a
 * cardinality of three allowing our content type to give the user three color
 * fields.
 *
 * This big array is factored into this function for readability.
 *
 * @return array
 *   An associative array specifying the instances we wish to add to our new
 *   node type.
 */
function _loopedia_installed_instances() {
  return array(
    'loopedia_color' => array(
      'field_name' => 'loopedia_color',
      'label'       => t('The colors available for this object.'),
      'widget'      => array(
        'type'    => 'text_textfield',
      ),
      'display' => array(
        'example_node_list' => array(
          'label' => 'hidden',
          'type' => 'node_example_colors',
        ),
      ),
    ),
    'node_example_quantity' => array(
      'field_name'  => 'node_example_quantity',
      'label' => t('Quantity required'),
      'type'        => 'text',
      'widget'      => array(
        'type'    => 'text_textfield',
      ),
      'display' => array(
        'example_node_list' => array(
          'label' => 'hidden',
          'type' => 'hidden',
        ),
      ),
    ),
    'node_example_image' => array(
      'field_name'  => 'node_example_image',
      'label'       => t('Upload an image:'),
      'required'    => FALSE,
      'widget' => array(
        'type'    => 'image_image',
        'weight'  => 2.10,
      ),
      'display' => array(
        'example_node_list' => array(
          'label' => 'hidden',
          'type' => 'image_link_content__thumbnail',
        ),
      ),
    ),
  );
}
